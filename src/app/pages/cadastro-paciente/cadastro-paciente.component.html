<app-sidebar
  (sidebarRetracted)="onSidebarRetracted($event)"
  [isRetracted]="isMenuRetracted"
></app-sidebar>
<app-toolbar
  [isMenuRetracted]="isMenuRetracted"
  [pageTitle]="pageTitle"
></app-toolbar>
<div class="container" id="cadastro" [ngClass]="{ retracted: isMenuRetracted }">
  <h3 class="encontre">Cadastre um paciente:</h3>

  <form [formGroup]="form" class="fieldset" (ngSubmit)="cadastrar()">
    <div
      id="fullName"
      class="elemento-formulario"
      [ngClass]="{
        'erro-formulario':
          form.get('fullName')?.invalid && form.get('fullName')?.touched
      }"
    >
      <label for="fullName">Nome Completo:</label>
      <input
        placeholder="Nome completo"
        type="text"
        name="fullName"
        formControlName="fullName"
      />
      <span
        *ngIf="form.get('fullName')?.invalid && form.get('fullName')?.touched"
        >Nome é obrigatório e deve ter entre 8 e 64 caracteres.</span
      >
    </div>

    <div class="row">
      <div
        id="gender"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario':
            form.get('gender')?.invalid && form.get('gender')?.touched
        }"
      >
        <label for="gender">Gênero:</label>
        <select name="gender" formControlName="gender">
          <option value="" [disabled]="true" selected>
            Selecione o gênero
          </option>
          <option value="Homem cis">Homem cis</option>
          <option value="Mulher cis">Mulher cis</option>
          <option value="Mulher trans">Mulher trans</option>
          <option value="Homem trans">Homem trans</option>
          <option value="Não binário">Não binário</option>
          <option value="Prefiro não informar">Não informar</option>
        </select>
        <span
          *ngIf="form.get('gender')?.invalid && form.get('gender')?.touched"
          class="erro-formulario"
          >Selecione um gênero.</span
        >
      </div>

      <div
        id="birthDate"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario':
            form.get('birthDate')?.invalid && form.get('birthDate')?.touched
        }"
      >
        <label for="birthDate">Data de Nascimento:</label>
        <input type="date" name="birthDate" formControlName="birthDate" />
        <span
          *ngIf="
            form.get('birthDate')?.invalid && form.get('birthDate')?.touched
          "
          class="erro-formulario"
          >Data de nascimento é obrigatória.</span
        >
      </div>
    </div>

    <div class="row-3">
      <div
        id="cpf"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario':
            form.get('cpf')?.invalid && form.get('cpf')?.touched
        }"
      >
        <label for="cpf">CPF:</label>
        <input
          mask="000.000.000-00"
          placeholder="Ex.: 000.000.000-00"
          type="text"
          name="cpf"
          formControlName="cpf"
        />
        <span
          *ngIf="form.get('cpf')?.invalid && form.get('cpf')?.touched"
          class="erro-formulario"
          >CPF é obrigatório e deve seguir o formato 000.000.000-00.</span
        >
      </div>

      <div
        id="rg"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario': form.get('rg')?.invalid && form.get('rg')?.touched
        }"
      >
        <label for="rg">RG:</label>
        <input
          placeholder="Ex.: 1234567890"
          type="text"
          name="rg"
          formControlName="rg"
        />
        <span
          *ngIf="form.get('rg')?.invalid && form.get('rg')?.touched"
          class="erro-formulario"
          >RG é obrigatório e deve ter no máximo 20 caracteres.</span
        >
      </div>

      <div
        id="rgIssuer"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario':
            form.get('rgIssuer')?.invalid && form.get('rgIssuer')?.touched
        }"
      >
        <label for="rgIssuer">Órgão Expedidor:</label>
        <input
          placeholder="Ex.: SSP"
          type="text"
          name="rgIssuer"
          formControlName="rgIssuer"
        />
        <span
          *ngIf="form.get('rgIssuer')?.invalid && form.get('rgIssuer')?.touched"
          class="erro-formulario"
          >Órgão Expedidor é obrigatório.</span
        >
      </div>
    </div>

    <div class="row">
      <div
        id="maritalStatus"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario':
            form.get('maritalStatus')?.invalid &&
            form.get('maritalStatus')?.touched
        }"
      >
        <label for="maritalStatus">Estado Civil:</label>
        <select name="maritalStatus" formControlName="maritalStatus">
          <option value="" disabled selected>Selecione o Estado Civil:</option>
          <option value="Casado">Casado</option>
          <option value="Solteiro">Solteiro</option>
          <option value="Divorciado">Divorciado</option>
          <option value="Viúvo">Viúvo</option>
        </select>
        <span
          *ngIf="
            form.get('maritalStatus')?.invalid &&
            form.get('maritalStatus')?.touched
          "
          class="erro-formulario"
          >Selecione um estado civil.</span
        >
      </div>

      <div
        id="placeOfBirth"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario':
            form.get('placeOfBirth')?.invalid &&
            form.get('placeOfBirth')?.touched
        }"
      >
        <label for="placeOfBirth">Naturalidade:</label>
        <input
          placeholder="Ex.: São Paulo"
          type="text"
          name="placeOfBirth"
          formControlName="placeOfBirth"
        />
        <span
          *ngIf="
            form.get('placeOfBirth')?.invalid &&
            form.get('placeOfBirth')?.touched
          "
          class="erro-formulario"
          >Naturalidade é obrigatória e deve ter entre 8 e 64 caracteres.</span
        >
      </div>
    </div>

    <div class="row">
      <div
        id="phone"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario':
            form.get('phone')?.invalid && form.get('phone')?.touched
        }"
      >
        <label for="phone">Telefone:</label>
        <input
          placeholder="Ex.: (99) 9 9999-9999"
          mask="(00) 0 0000-0000"
          type="text"
          name="phone"
          formControlName="phone"
        />
        <span
          *ngIf="form.get('phone')?.invalid && form.get('phone')?.touched"
          class="erro-formulario"
          >Telefone é obrigatório e deve seguir o formato (99) 9
          9999-9999.</span
        >
      </div>

      <div
        id="email"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario':
            form.get('email')?.invalid && form.get('email')?.touched
        }"
      >
        <label for="email">Email:</label>
        <input
          placeholder="Ex.: email@email.com.br"
          type="email"
          name="email"
          formControlName="email"
        />
        <span
          *ngIf="form.get('email')?.invalid && form.get('email')?.touched"
          class="erro-formulario"
          >Preencha o email.</span
        >
      </div>
    </div>

    <div class="row">
      <div
        id="emergencyContact"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario':
            form.get('emergencyContact')?.invalid &&
            form.get('emergencyContact')?.touched
        }"
      >
        <label for="emergencyContact">Contato de Emergência:</label>
        <input
          placeholder="Ex.: (99) 9 9999-9999"
          mask="(00) 0 0000-0000"
          type="text"
          name="emergencyContact"
          formControlName="emergencyContact"
        />
        <span
          *ngIf="
            form.get('emergencyContact')?.invalid &&
            form.get('emergencyContact')?.touched
          "
          class="erro-formulario"
          >Contato de Emergência é obrigatório e deve seguir o formato (99) 9
          9999-9999.</span
        >
      </div>

      <div
        id="allergies"
        class="elemento-formulario"
        [ngClass]="{
          'erro-formulario':
            form.get('allergies')?.invalid && form.get('allergies')?.touched
        }"
      >
        <label for="allergies">Alergias:</label>
        <input
          placeholder="Ex.: Amendoim, Pólen"
          type="text"
          name="allergies"
          formControlName="allergies"
        />
        <span
          *ngIf="
            form.get('allergies')?.invalid && form.get('allergies')?.touched
          "
          class="erro-formulario"
          >Alergias são obrigatórias e devem ser separadas por vírgulas.</span
        >
      </div>
    </div>

    <div class="row">
      <div id="specificCare" class="elemento-formulario">
        <label for="specificCare">Cuidados Específicos:</label>
        <input
          placeholder="Ex.: Dieta especial, Medicamentos"
          type="text"
          name="specificCare"
          formControlName="specificCare"
        />
      </div>

      <div id="healthInsurance" class="elemento-formulario">
        <label for="healthInsurance">Convênio:</label>
        <input
          placeholder="Ex.: Unimed"
          type="text"
          name="healthInsurance"
          formControlName="healthInsurance"
        />
      </div>
    </div>

    <div class="row">
      <div id="healthInsuranceNumber" class="elemento-formulario">
        <label for="healthInsuranceNumber">Número do Convênio:</label>
        <input
          placeholder="Ex.: 1234567890"
          type="text"
          name="healthInsuranceNumber"
          formControlName="healthInsuranceNumber"
        />
      </div>

      <div id="healthInsuranceValidity" class="elemento-formulario">
        <label for="healthInsuranceValidity">Validade do Convênio:</label>
        <input
          type="date"
          name="healthInsuranceValidity"
          formControlName="healthInsuranceValidity"
        />
      </div>
    </div>

    <div class="row-3">
      <div id="zipCode" class="elemento-formulario" [ngClass]="{'erro-formulario': form.get('zipCode')?.invalid && form.get('zipCode')?.touched}">
        <label for="zipCode">CEP:</label>
        <input placeholder="Ex.: 12345-678" type="text" formControlName="zipCode" />
        <span *ngIf="form.get('zipCode')?.invalid && form.get('zipCode')?.touched" class="erro-formulario">CEP é obrigatório e deve estar no formato 12345-678.</span>
      </div>
    
      <div id="state" class="elemento-formulario" [ngClass]="{'erro-formulario': form.get('state')?.invalid && form.get('state')?.touched}">
        <label for="state">Estado:</label>
        <input placeholder="Ex.: SP" type="text" formControlName="state" [disabled]="true" />
      </div>
    
      <div id="city" class="elemento-formulario" [ngClass]="{'erro-formulario': form.get('city')?.invalid && form.get('city')?.touched}">
        <label for="city">Cidade:</label>
        <input placeholder="Ex.: São Paulo" type="text" formControlName="city" [disabled]="true" />
      </div>
    </div>
    
    <div class="row-3">
      <div id="street" class="elemento-formulario" [ngClass]="{'erro-formulario': form.get('street')?.invalid && form.get('street')?.touched}">
        <label for="street">Logradouro:</label>
        <input placeholder="Ex.: Rua Exemplo" type="text" formControlName="street" [disabled]="true" />
      </div>
    
      <div id="number" class="elemento-formulario" [ngClass]="{'erro-formulario': form.get('number')?.invalid && form.get('number')?.touched}">
        <label for="number">Número:</label>
        <input placeholder="Ex.: 123" type="text" formControlName="number" />
        <span *ngIf="form.get('number')?.invalid && form.get('number')?.touched" class="erro-formulario">Número é obrigatório.</span>
      </div>
    
      <div id="complement" class="elemento-formulario">
        <label for="complement">Complemento:</label>
        <input placeholder="Ex.: Apto 101" type="text" formControlName="complement" />
      </div>
    </div>
    
    <div class="row">
      <div id="neighborhood" class="elemento-formulario" [ngClass]="{'erro-formulario': form.get('neighborhood')?.invalid && form.get('neighborhood')?.touched}">
        <label for="neighborhood">Bairro:</label>
        <input placeholder="Ex.: Centro" type="text" formControlName="neighborhood" [disabled]="true" />
      </div>
    
      <div id="referencePoint" class="elemento-formulario">
        <label for="referencePoint">Ponto de Referência:</label>
        <input placeholder="Ex.: Próximo ao mercado" type="text" formControlName="referencePoint" />
      </div>
    </div>

    <div class="buttons">
      <button
        class="delete"
        [disabled]="!isEdit"
        (click)="deletePatient()"
        [class.disabled]="!isEdit"
      >
        Deletar
      </button>
      <button
        class="edit"
        [disabled]="!isEdit"
        (click)="cadastrar()"
        [class.disabled]="!isEdit"
      >
        Editar
      </button>
      <button
        class="save"
        [disabled]="!form.valid || isEdit"
        (click)="cadastrar()"
        [class.disabled]="!form.valid || isEdit"
      >
        Cadastrar
      </button>
    </div>
  </form>
</div>